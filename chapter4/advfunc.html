<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Advanced Function Concepts - High Performance Programming</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Monash DeepNeuron&#x27;s High Performance Programming Curriculum">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../home.html">Home</a></li><li class="chapter-item expanded affix "><div>Foreword</div></li><li class="chapter-item expanded "><a href="../chapter1/chapter1.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter1/wsl.html"><strong aria-hidden="true">1.1.</strong> WSL</a></li><li class="chapter-item expanded "><a href="../chapter1/software.html"><strong aria-hidden="true">1.2.</strong> Installing Software</a></li><li class="chapter-item expanded "><a href="../chapter1/helloworld.html"><strong aria-hidden="true">1.3.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="../chapter1/godbolt.html"><strong aria-hidden="true">1.4.</strong> Compiler Explorer</a></li><li class="chapter-item expanded "><a href="../chapter1/slides1.html"><strong aria-hidden="true">1.5.</strong> Slides</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter2/chapter2.html"><strong aria-hidden="true">2.</strong> Basics of C++</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter2/typesystem.html"><strong aria-hidden="true">2.1.</strong> The C++ Type System</a></li><li class="chapter-item expanded "><a href="../chapter2/types.html"><strong aria-hidden="true">2.2.</strong> Primitive Types</a></li><li class="chapter-item expanded "><a href="../chapter2/variables.html"><strong aria-hidden="true">2.3.</strong> Variables</a></li><li class="chapter-item expanded "><a href="../chapter2/operators.html"><strong aria-hidden="true">2.4.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../chapter2/io.html"><strong aria-hidden="true">2.5.</strong> IO</a></li><li class="chapter-item expanded "><a href="../chapter2/eqordlogic.html"><strong aria-hidden="true">2.6.</strong> Equality, Ordering &amp; Logical Operators</a></li><li class="chapter-item expanded "><a href="../chapter2/condexpr.html"><strong aria-hidden="true">2.7.</strong> Conditional Expressions</a></li><li class="chapter-item expanded "><a href="../chapter2/loops.html"><strong aria-hidden="true">2.8.</strong> Loops</a></li><li class="chapter-item expanded "><a href="../chapter2/functions.html"><strong aria-hidden="true">2.9.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../chapter2/slides2.html"><strong aria-hidden="true">2.10.</strong> Slides</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter3/chapter3.html"><strong aria-hidden="true">3.</strong> Memory</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter3/pointers.html"><strong aria-hidden="true">3.1.</strong> Pointers</a></li><li class="chapter-item expanded "><a href="../chapter3/slices.html"><strong aria-hidden="true">3.2.</strong> Slices</a></li><li class="chapter-item expanded "><a href="../chapter3/references.html"><strong aria-hidden="true">3.3.</strong> References</a></li><li class="chapter-item expanded "><a href="../chapter3/memory.html"><strong aria-hidden="true">3.4.</strong> Dynamic Memory</a></li><li class="chapter-item expanded "><a href="../chapter3/stdlib.html"><strong aria-hidden="true">3.5.</strong> The Standard Library</a></li><li class="chapter-item expanded "><a href="../chapter3/slides3.html"><strong aria-hidden="true">3.6.</strong> Slides</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter4/chapter4.html"><strong aria-hidden="true">4.</strong> Intermediate C++ Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter4/advfunc.html" class="active"><strong aria-hidden="true">4.1.</strong> Advanced Function Concepts</a></li><li class="chapter-item expanded "><a href="../chapter4/namespaces.html"><strong aria-hidden="true">4.2.</strong> Namespaces</a></li><li class="chapter-item expanded "><a href="../chapter4/enums.html"><strong aria-hidden="true">4.3.</strong> Enumerations</a></li><li class="chapter-item expanded "><a href="../chapter4/unions.html"><strong aria-hidden="true">4.4.</strong> Unions</a></li><li class="chapter-item expanded "><a href="../chapter4/structs.html"><strong aria-hidden="true">4.5.</strong> Structures</a></li><li class="chapter-item expanded "><a href="../chapter4/task1.html"><strong aria-hidden="true">4.6.</strong> Task 1</a></li><li class="chapter-item expanded "><a href="../chapter4/slides4.html"><strong aria-hidden="true">4.7.</strong> Slides</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter5/chapter5.html"><strong aria-hidden="true">5.</strong> Generic Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter5/classes.html"><strong aria-hidden="true">5.1.</strong> Classes</a></li><li class="chapter-item expanded "><a href="../chapter5/templates.html"><strong aria-hidden="true">5.2.</strong> Templates</a></li><li class="chapter-item expanded "><a href="../chapter5/generics.html"><strong aria-hidden="true">5.3.</strong> Generics</a></li><li class="chapter-item expanded "><a href="../chapter5/concepts.html"><strong aria-hidden="true">5.4.</strong> Concepts</a></li><li class="chapter-item expanded "><a href="../chapter5/task2.html"><strong aria-hidden="true">5.5.</strong> Task 2</a></li><li class="chapter-item expanded "><a href="../chapter5/slides5.html"><strong aria-hidden="true">5.6.</strong> Slides</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter6/chapter6.html"><strong aria-hidden="true">6.</strong> Algorithms &amp; Data Structures</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter6/iterators.html"><strong aria-hidden="true">6.1.</strong> Iterators</a></li><li class="chapter-item expanded "><a href="../chapter6/data-structures.html"><strong aria-hidden="true">6.2.</strong> Data Structures</a></li><li class="chapter-item expanded "><a href="../chapter6/algorithms.html"><strong aria-hidden="true">6.3.</strong> Algorithms</a></li><li class="chapter-item expanded "><a href="../chapter6/ranges.html"><strong aria-hidden="true">6.4.</strong> Ranges</a></li><li class="chapter-item expanded "><a href="../chapter6/views.html"><strong aria-hidden="true">6.5.</strong> Views</a></li><li class="chapter-item expanded "><a href="../chapter6/task3.html"><strong aria-hidden="true">6.6.</strong> Task 3</a></li><li class="chapter-item expanded "><a href="../chapter6/slides6.html"><strong aria-hidden="true">6.7.</strong> Slides</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter7/chapter7.html"><strong aria-hidden="true">7.</strong> Concurrent Computing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter7/parallel-alg.html"><strong aria-hidden="true">7.1.</strong> Parallel Algorithms</a></li><li class="chapter-item expanded "><a href="../chapter7/atomics.html"><strong aria-hidden="true">7.2.</strong> Atomics</a></li><li class="chapter-item expanded "><a href="../chapter7/threads.html"><strong aria-hidden="true">7.3.</strong> Threads</a></li><li class="chapter-item expanded "><a href="../chapter7/mutexes.html"><strong aria-hidden="true">7.4.</strong> Mutexes</a></li><li class="chapter-item expanded "><a href="../chapter7/async.html"><strong aria-hidden="true">7.5.</strong> Asynchronous Programming</a></li><li class="chapter-item expanded "><a href="../chapter7/slides7.html"><strong aria-hidden="true">7.6.</strong> Slides</a></li></ol></li><li class="chapter-item expanded "><a href="../GODBOLT.html">Godbolt Examples</a></li><li class="chapter-item expanded affix "><a href="../planned.html">Planned Additions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">High Performance Programming</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/MonashDeepNeuron/HPP" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="advanced-functions"><a class="header" href="#advanced-functions">Advanced Functions</a></h1>
<p>We saw in chapter 2 how to create functions to abstract usable pieces of code into smaller and more modular components. This is the bare-bones of functions of C++. Functions come in a lot of forms in C++ and have to make different guarantees about how they operate. This is done with various specifiers and labels that indicate to the compiler what a function is expected to do. Some of these we have seen including parameter and return value types along with these types various there CV-qualifications however, there are a few that have not been covered yet. Throughout this page we will build up a function signature from the blueprint below by adding new specifiers to showcase the syntax.</p>
<pre><code class="language-cxx">int f(int n)
{ return n; }
</code></pre>
<h2 id="no-exception-optimization"><a class="header" href="#no-exception-optimization">No exception optimization</a></h2>
<p>WE won't be covering exceptions in this course as they are quite an advanced topic that is hard to use and costly to get wrong. We may cover exceptions at a later date. In C++ some functions may throw exceptions when ill-formed behavior occurs and but it can be handled so the system can remain operational. However, some functions we can make guarantees at compile time that they will not throw an exception. This allows the compiler to optimise the execution path knowing that it will not need to recover the stack. To do this, we mark a function <code>noexcept</code> keyword. If a <code>noexcept</code> functions does throw, the program calls <code>std::terminate</code>.</p>
<pre><code class="language-cxx">int f(int n) noexcept
{ return n; }
</code></pre>
<p><a href="https://en.cppreference.com/w/cpp/language/noexcept_spec"><code>noexcept</code></a></p>
<h2 id="attributes"><a class="header" href="#attributes">Attributes</a></h2>
<p>Attributes are a declarator that indicates a condition of a function. Attributes are prefixed before the return type of the function using the double square-bracket notation <code>[[attribute-name]]</code>. C++ only has a few standard attributes so far but compilers often introduce their own for optimisation of the compiler.</p>
<ul>
<li><code>[[noreturn]]</code> - Indicates a function doesn't return</li>
<li><code>[[maybe_unused]]</code> - Indicates an entity maybe unused and suppresses relevant compiler warnings.</li>
<li><code>[[deprecated]]</code> &amp; <code>[[deprecated(&quot;reason&quot;)]]</code> - Indicated that the use of the marked entity is allowed but discouraged.</li>
<li><code>[[nodiscard]]</code> &amp; <code>[[nodiscard(&quot;reason&quot;)]]</code> - Indicated that the return value of a function should not be discarded and generates a compiler warning if it is.</li>
</ul>
<pre><code class="language-cxx">[[nodiscard]]
int f(int n) noexcept
{ return n; }
</code></pre>
<p><a href="https://en.cppreference.com/w/cpp/language/attributes"><strong><em>attributes</em></strong></a></p>
<h2 id="auto-function"><a class="header" href="#auto-function">Auto Function</a></h2>
<p>Sometimes the return value of a function is a complicated type or depends on the type of the parameters of the function. This can be solved using an <code>auto</code> declared function with a trailing-return-type.</p>
<pre><code class="language-cxx">[[nodiscard]]
auto f(int n) noexcept
    -&gt; int
{ return n; }
</code></pre>
<p><a href="https://en.cppreference.com/w/cpp/language/function"><strong><em>Function Declarations</em></strong></a></p>
<blockquote>
<p>Note: The styling used above is my own personal syntax styling. You are free to use your own.</p>
</blockquote>
<h2 id="function-overloading"><a class="header" href="#function-overloading">Function Overloading</a></h2>
<p>One difficulty in many programing languages is that you cannot have function symbols with the same name. This creates clashes and ambiguity meaning the compiler doesn't know which function to use. In C++ however, you can have functions with the same symbol (name) as long as there parameters are different. This is called function overloading. This is is achieved due to what is called name mangling. Function names are not simply just the name, say <code>f</code> from above but are mangled to include the type of the parameters the function takes. Thus <code>int f(int n)</code> is a different function to <code>float f(float n)</code>. This powerful feature allows us to create multiple functions that perform the same action but for multiple different types and move type resolution to compile time.</p>
<h3 id="operator-overloading"><a class="header" href="#operator-overloading">Operator Overloading</a></h3>
<p>Function overloading opens the opportunity to create user defined operators. This means you can overload the <code>+</code> or <code>&lt;&lt;</code> operators to work for custom types or introduce new functionality. This is how the <code>&lt;&lt;</code> and <code>&gt;&gt;</code> works for stream in C++. The <code>&lt;&lt;</code> and <code>&gt;&gt;</code> are overloaded to work differently for stream objects.</p>
<pre><code class="language-cxx">#include &lt;iostream&gt;
#include &lt;string&gt;

using namespace std::literals;

/// Comment out to see old behaviour
auto operator+ (std::string x, std::string y) -&gt; int
{ return std::stoi(x) + std::stoi(y); }

auto main() -&gt; int
{
    std::cout &lt;&lt; &quot;6&quot;s + &quot;5&quot;s &lt;&lt; std::endl;

    return 0;
}
</code></pre>
<p><a href="https://www.godbolt.org/z/jaevh6dna">Example</a></p>
<h2 id="function-utilities"><a class="header" href="#function-utilities">Function Utilities</a></h2>
<h3 id="perfect-forwarding"><a class="header" href="#perfect-forwarding">Perfect Forwarding</a></h3>
<p>Often in C++ we want to pass arguments from one function to another without modification. An example of this is passing arguments to a wrapper function that might call some old legacy API. However, there can be issues with value categories, const-ness and reference values of parameters that create undefined behaviour, compiler errors etc. To fix this, C++ introduced perfect forwarding, a way to perfectly pass arguments from on function call to another without losing or changing the value category of the parameters. This is done with <code>std::forward&lt;T&gt;</code>. I am glossing over the details of this but if you are interested, this <a href="https://stackoverflow.com/a/3582313/13429386">SO answer</a> gives a great explanation of the problem, attempted solutions and the solution in C++ now.</p>
<p><a href="https://en.cppreference.com/w/cpp/utility/forward"><code>std::forward&lt;T&gt;</code></a></p>
<h3 id="value-and-type-helpers"><a class="header" href="#value-and-type-helpers">Value and Type Helpers</a></h3>
<p>Sometimes it is useful to work with the type of an object, not the value. To obtain the type of an object the <code>decltype</code> keyword. This declares the type of the entity or expression passed to the keyword in a function call style. This is useful for deducing the type of an expression once it has been evaluated.</p>
<pre><code class="language-cxx">#include &lt;type_traits&gt;

auto add(int x, float y) -&gt; decltype(x + y)
{ return x + y; }

auto main() -&gt; int
{
    static_assert(std::is_same_v&lt;decltype(add(9, 0.345)), float&gt;, &quot;Result is not a float&quot;);
    static_assert(std::is_same_v&lt;decltype(add(9, 0.345)), int&gt;, &quot;Result is not a int&quot;);

    return 0;
}
</code></pre>
<p><a href="https://www.godbolt.org/z/6Gco6zsvs">Example</a></p>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/header/type_traits"><code>&lt;type_traits&gt;</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/language/decltype"><code>decltype</code></a></li>
</ul>
<p>Sometimes though, it is impossible to find the return type of objects method calls as it requires constructing an actual value. To overcome this, C++ has a neat function called <code>std::declval</code>. This is able to construct an rvalue (temporary) in order to access object methods.</p>
<pre><code class="language-cxx">#include &lt;type_traits&gt;

auto main() -&gt; int
{
    static_assert(std::is_same_v&lt;decltype(std::declval&lt;int&gt;()), int&amp;&amp;&gt;, &quot;Result is rvalue&quot;);
    static_assert(std::is_same_v&lt;decltype(std::declval&lt;int&gt;()), int&gt;, &quot;Result is not rvalue&quot;);

    return 0;
}
</code></pre>
<p><a href="https://www.godbolt.org/z/qbzqKcffa">Example</a></p>
<p><a href="https://en.cppreference.com/w/cpp/utility/declval"><code>std::declval&lt;T&gt;</code></a></p>
<h2 id="functional-programming"><a class="header" href="#functional-programming">Functional Programming</a></h2>
<h3 id="function-types"><a class="header" href="#function-types">Function Types</a></h3>
<p>Functions; like variables, have a type. This makes it possible to use functions are variables that can be passed to other functions. But what is the type of a function? In general the type of a function is composed of its return type and the type of its arguments, ie. <code>R(P1, P2, P3, ...)</code>. In C functions are passed as function pointers. It is a powerful utility but can be error prone due to the nature of pointers. Instead, C++ has <code>std::function&lt;R(Args...)&gt;</code> which is able to bind to a function to a variable that can be easily passed around to other functions, copied and moved.</p>
<pre><code class="language-cxx">#include &lt;functional&gt;
#include &lt;iostream&gt;

auto print_num(double i)
    -&gt; void
{ std::cout &lt;&lt; i &lt;&lt; '\n'; }

auto add(int x, float y)
    -&gt; double
{ return x + y; }

auto mult_print(int x, float y, std::function&lt;void(double)&gt; f)
    -&gt; void
{ f(x * y); }

auto main() -&gt; int
{
    std::function&lt;void(double)&gt; print_f {print_num};
    std::function&lt;double(int, float)&gt; add_f {add};

    print_f(add_f(4, 6.6));
    mult_print(3, 0.056, print_f);

    return 0;
}
</code></pre>
<p><a href="https://www.godbolt.org/z/TjrWfM5Th">Example</a></p>
<p><a href="https://en.cppreference.com/w/cpp/utility/functional/function"><code>std::function&lt;R(Args...)&gt;</code></a></p>
<h3 id="lambdas-and-closures"><a class="header" href="#lambdas-and-closures">Lambdas and Closures</a></h3>
<p>Sometimes functions need to be able to enclose information about the global environment. This requires the use of closures, a local environment that can access the parent environment in which the closure exists in. In C++ this is accomplished with a lambda. Lambdas are anonymous functions that can capture local variables. Anonymous functions are able to be created and passed to other functions without having to exist as a stored function. Lambdas have a unique syntax consisting of three distinct sets of brackets. <code>[]</code> is used to specified the captured variables, <code>()</code> is the same as regular functions indicating the formal parameters of the lambda that are used when the lambda is invoked, and finally <code>{}</code> holds the body of the lambda.</p>
<p>The capture parameters can either capture by value or by reference. Value captures simply specify the variable names while reference captures prefix an <code>&amp;</code> to the variable name. You can also elide the names of captures and implicitly capture variables by using them in the body of the lambda and indicate whether all (or some) of the implicit captures are by value or reference using the symbols <code>=</code> or <code>&amp;</code> respectively.</p>
<pre><code class="language-cxx">#include &lt;functional&gt;
#include &lt;iostream&gt;

auto fmult(int x, float y, std::function&lt;void(double)&gt; f)
    -&gt; void
{ f(x * y); }

auto main() -&gt; int
{
    /// Use `std::function&lt;R(Args...)&gt;` for lambda type
    std::function&lt;double(int, float)&gt; add_f = [](int x, float y) -&gt; double { return x + y; };

    /// Lambda declared with `auto`
    auto print_f = [](double i){ std::cout &lt;&lt; i &lt;&lt; '\n'; };

    /// Lambda capture `print_f` by value
    auto print_mult = [=](int x, float y){ return fmult(x, y, print_f); };

    int a {7};
    int b {5};

    /// Capture `print_mult` and `a` by value and `b` by reference
    /// Elide names of `mult_print` and `a` with `=`
    auto print_7mult5 = [=, &amp;b](){ return print_mult(a, b); };

    /// Invoke lambdas like functions
    print_f(add_f(4, 6.6));
    fmult(7, 8.9, [](double i){ std::cout &lt;&lt; i &lt;&lt; '\n'; });     ///&lt; Use lambda as anonymous function,
    print_mult(7, 8.9);                                         ///&lt; or use captured version
    
    
    print_7mult5();     ///&lt; 35
    b = 9;              ///&lt; Modify `b`
    print_7mult5();     ///&lt; 63

    return 0;
}
</code></pre>
<p><a href="https://www.godbolt.org/z/he59bKxPf">Example</a></p>
<p><a href="https://en.cppreference.com/w/cpp/language/lambda">Lambdas</a></p>
<h3 id="partial-application"><a class="header" href="#partial-application">Partial Application</a></h3>
<p>Another useful technique when working with functions is a technique known as partial application. This is similar to how closures with lambda work with a few key differences. Partial application allows you to partially apply the certain parameters of a function while leaving other empty to be passed at a later invocation. This is done with with the <code>std::bind</code> function which takes the function and a variable list of arguments that will be bound to the function in their respective order. The returned function can be invoked like any other function and will be invoked as if the bound variables were passed to it. The power of <code>std::bind</code> comes from its ability to accept placeholder values. These values follow the pattern of <code>_N</code> where N is any number starting at <code>1</code>. Placeholders are passed to <code>std::bind</code> can can be placed anywhere in the variable argument list. When the resulting function is invoked, any arguments passed to it will be passed to the underlying function. The first passed argument from the partially applied function will be passed to all instances of the <code>_1</code> placeholder and so on.</p>
<blockquote>
<p>Note: <code>std::bind</code> cannot bind (const) reference arguments functions take. For this, parameters must be wrapped in <code>std::ref</code> or <code>std::cref</code> to bind to references.</p>
</blockquote>
<pre><code class="language-cxx">#include &lt;functional&gt;
#include &lt;iostream&gt;

auto fn(int n1, int n2, int n3, const int&amp; n4, int n5)
{ 
    std::cout &lt;&lt; n1 &lt;&lt; ' ' 
              &lt;&lt; n2 &lt;&lt; ' ' 
              &lt;&lt; n3 &lt;&lt; ' ' 
              &lt;&lt; n4 &lt;&lt; ' ' 
              &lt;&lt; n5 &lt;&lt; '\n';
}

/// Import placeholders
using namespace std::placeholders;

auto main() -&gt; int
{
    auto f1 = std::bind(fn, 1, _1, 4, _2, 6);
    auto f2 = std::bind(fn, _1, _1, _1, _1, _1);

    auto a {47676};
    auto f3 = std::bind(fn, _4, _3, _2, std::cref(a), _1);

    f3(4, 3, 2, 1);     ///&lt; 1 2 3 47676 4
    f1(4, a);           ///&lt; 1 4 4 47676 6
    a = 777; 
    f3(11, 10, 9, 8);   ///&lt; 8 9 10 777 11
    f1(3, a);           ///&lt; 1 3 4 777 6

    f2(6);              ///&lt; 6 6 6 6 6

    return 0;
}
</code></pre>
<p><a href="https://www.godbolt.org/z/79T3hYvea">Example</a></p>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/bind"><code>std::bind</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/placeholders"><code>std::placeholders</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/ref"><code>std::ref</code> &amp; <code>std::cref</code></a></li>
</ul>
<p>There is also two new functions that have been added to the standard library. These are <code>std::bind_front</code> (C++20) and <code>std::bind_back</code> (C++23) that allow for efficiently binding parameters to the front or back of a function. These functions do not support the placeholder values like <code>std::bind</code>.</p>
<pre><code class="language-cxx">#include &lt;functional&gt;
#include &lt;iostream&gt;

auto fn(int n1, int n2, int n3, const int&amp; n4, int n5)
{ 
    std::cout &lt;&lt; n1 &lt;&lt; ' ' 
              &lt;&lt; n2 &lt;&lt; ' ' 
              &lt;&lt; n3 &lt;&lt; ' ' 
              &lt;&lt; n4 &lt;&lt; ' ' 
              &lt;&lt; n5 &lt;&lt; '\n';
}

auto main() -&gt; int
{
    auto f = std::bind_front(fn, 1, 2, 3);
    f(4, 5);  ///&lt; 1 2 3 4 5

    return 0;
}
</code></pre>
<p><a href="https://www.godbolt.org/z/vfxG95Eqr">Example</a></p>
<p><a href="https://en.cppreference.com/w/cpp/utility/functional/bind_front"><code>std::bind_front</code> &amp; <code>std::bind_back</code></a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chapter4/chapter4.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../chapter4/namespaces.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chapter4/chapter4.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../chapter4/namespaces.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
